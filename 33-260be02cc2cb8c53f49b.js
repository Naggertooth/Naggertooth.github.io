(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{653:function(e,t,a){"use strict";a.r(t);a(106),a(78),a(59);var n=a(1),r=a.n(n),i=a(58),l=a(13),o=a.n(l),c=a(483),s=a(334),m=a(484),u=a(6),f=a(444),g=a.n(f),d=function(e){var t=e.data,a=t.timelines,n=t.range,i=[{x:a,y:t.values,type:"scatter",mode:"lines+markers",marker:{color:"red"}}],l={width:window.innerWidth>1599?800:700,height:390,yaxis:{side:"left",domain:[0,1]},xaxis:{type:"date",range:n,tickformat:"%d %b\n %Y"}};return r.a.createElement(g.a,{data:i,layout:l,config:{displaylogo:!1}})},p=(a(30),a(652)),h=a(539),b=a.n(h),v=(a(358),a(27));Object(p.b)("ru",b.a);var E=v.a.constants.moment.graphFormat,B=function(e){var t=e.range,a=e.changeRange,i=Object(n.useState)(0),l=i[0],c=i[1],s=function(e,t){return o()(e).isAfter(t)&&0===l?[o()(e).format(E),o()(e).format(E)]:o()(t).isBefore(e)&&1===l?(c(0),[o()(t).format(E),o()(t).format(E)]):[o()(e).format(E),o()(t).format(E)]};return r.a.createElement("div",{className:"calendar"},r.a.createElement(p.a,Object.assign({maxDate:new Date,open:!0,locale:"ru",popperPlacement:"bottom-start",popperModifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1},computeStyle:{enabled:!1},hide:{enabled:!1}},startDate:o()(t[0]).toDate(),endDate:o()(t[t.length-1]).toDate(),onChange:function(e){0===l?(c(1),a(JSON.stringify(s(e,e)))):(c(0),a(JSON.stringify(s(t[0],e))))}},0===l?{}:{selectsEnd:!0})))},O=a(661),A=(a(359),function(e){var t=Object.assign({},e);return r.a.createElement(O.a,t)}),w=a(335),y=a.n(w),N=v.a.constants.forms,j=N.graphTimes,k=N.serverFormat,x=N.recognizedFormat,D=N.graphFormat;var S=Object(i.b)(function(e){return{timeline:e.form.Graph.values.timeline,infoMarkets:e.graph}},function(e){return{changeValue:function(t,a,n){return e(Object(s.a)(t,a,n))},getValuesPls:function(t,a){return e(u.b.default.getBriefcaseData({start:t,end:a}))}}})(function(e){var t=e.timeline,a=e.changeValue,i=e.infoMarkets,l=e.getValuesPls,s=JSON.parse(t),m=s.map(function(e){return o()(e,D).format(x)}),u=function e(t){var a=t.A,n=t.B;if(a&&n&&a.length&&n.length){if(0===a.length)return[];for(var r=[],i=[],l=[],c=[],s=a[0],m=n[0],u=1;u<a.length;u++)o()(a[u],D).isBefore(s,D)?(r[r.length]=a[u],i[i.length]=n[u]):(l[l.length]=a[u],c[c.length]=n[u]);return{A:e({A:r,B:i}).A.concat(s,e({A:l,B:c}).A),B:e({A:r,B:i}).B.concat(m,e({A:l,B:c}).B)}}return{A:[],B:[]}}({A:i.axisX,B:i.axisY}),f=Object(n.useState)({timelines:u.A,values:u.B,range:s}),g=f[0],p=f[1];return Object(n.useEffect)(function(){l(o()(s[0],D).format(k),o()(s[m.length-1],D).format(k))},[t]),Object(n.useEffect)(function(){p({timelines:u.A,values:u.B,range:s})},[i]),r.a.createElement("div",{className:y.a.graph__container},r.a.createElement("div",{className:y.a.plot},r.a.createElement("div",{className:y.a.plot__title},r.a.createElement("span",{className:y.a.title},"Динамика стоимости портфеля (руб.)"),r.a.createElement("form",{className:y.a.controls},r.a.createElement("label",{htmlFor:"timeline",className:y.a.ddLabel},"Показать за"),r.a.createElement(c.a,{name:"timeline",component:"input",type:"hidden"}),r.a.createElement(A,{onChange:function(e,t){return a("Graph","timeline",t.value)},placeholder:"Промежуток времени",options:j,selection:!0}))),r.a.createElement("div",{className:y.a.plot__container},r.a.createElement(d,{data:g}))),r.a.createElement(B,{changeRange:function(e){return a("Graph","timeline",e)},range:s}))}),_=Object(m.a)({form:"Graph",destroyOnUnmount:!1,initialValues:{timeline:j[3].value}})(S);t.default=_}}]);
//# sourceMappingURL=33-260be02cc2cb8c53f49b.js.map