{"version":3,"sources":["webpack:///./src/components/common/Table/Table.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js"],"names":["connectedTable","connect","state","ownProps","table","tables","tableName","dispatch","connectTable","name","url","pages","sort","order","perPage","actions","default","getTable","_ref","columns","tableUrl","defaultPageSize","_useState","useState","loading","setLoading","_useState2","data","setData","_useState3","setPages","useEffect","result","defaultProps","showPagination","resizable","pageSizeOptions","previousText","nextText","loadingText","noDataText","pageText","ofText","rowsText","ThComponent","props","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","Object","assign","children","className","onClick","style","title","filter","i","index","getTheadThProps","rowInfo","column","instance","sortable","sortColumn","manual","onFetchData","_onFetchData","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","sortArgs","wrap","_context","prev","next","sorted","id","desc","undefined","apply","page","concat","pageSize","stop","_x","this","arguments","react_table__WEBPACK_IMPORTED_MODULE_5__","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","module","exports","fn","self","args","err"],"mappings":"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","file":"32-d13108e23e3fb4e42db1.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport ReactTable from 'react-table'\r\nimport { connect } from 'react-redux'\r\n\r\nimport * as actions from '../../../redux/actions'\r\n\r\nimport './Table.scss'\r\n\r\nconst Table = ({\r\n    columns, tableName, tableUrl, table, connectTable, defaultPageSize,\r\n}) => {\r\n    const [loading, setLoading] = useState(true)\r\n    const [data, setData] = useState([])\r\n    const [pages, setPages] = useState(-1)\r\n\r\n    useEffect(() => {\r\n        if (typeof table !== 'undefined' && typeof table.data !== 'undefined') {\r\n            setData(table.data.result)\r\n            setPages(table.data.pages)\r\n            setLoading(false)\r\n        }\r\n    }, [table])\r\n\r\n    const defaultProps = {\r\n        showPagination: true,\r\n        resizable: true,\r\n        // showPageSizeOptions: false,\r\n        defaultPageSize: defaultPageSize || 5,\r\n        pageSizeOptions: [5, 20, 50, 100],\r\n        previousText: 'Назад',\r\n        nextText: 'Вперед',\r\n        loadingText: 'Загрузка данных...',\r\n        noDataText: 'Нет данных',\r\n        pageText: 'Страница',\r\n        ofText: 'из',\r\n        rowsText: 'Строк',\r\n        ThComponent: props => (\r\n            <div\r\n                {...{\r\n                    children: props.children,\r\n                    className: props.className,\r\n                    onClick: props.onClick,\r\n                    style: props.style,\r\n                    // eslint-disable-next-line max-len\r\n                    // togglesort: props.toggleSort, // react warning togglesort to lowercase please\r\n                }}\r\n                className={`rt-th ${props.className}`}\r\n            >\r\n                <div title={props.children[0].props.children} {...props.children[0].props}>\r\n                    {props.children[0].props.children}\r\n                </div>\r\n                {props.children.filter((i, index) => index !== 0)}\r\n            </div>\r\n        ), // something might not work, so comment this custom th for tests\r\n        getTheadThProps: (state, rowInfo, column, instance) => ({\r\n            onClick: () => {\r\n                if (column.sortable !== false) {\r\n                    instance.sortColumn(column)\r\n                }\r\n            },\r\n        }), // something might not work, so comment this custom th for tests\r\n\r\n        data,\r\n        pages,\r\n        loading,\r\n        manual: true, // this would indicate that server side pagination has been enabled\r\n        onFetchData: async (state) => {\r\n            setLoading(true)\r\n            const sortArgs = state.sorted[0]\r\n                ? [\r\n                    state.sorted[0].id,\r\n                    state.sorted[0].desc ? -1 : 1,\r\n                ]\r\n                : [undefined, undefined]\r\n            connectTable(\r\n                tableName,\r\n                tableUrl,\r\n                state.page + 1,\r\n                ...sortArgs,\r\n                state.pageSize,\r\n            )\r\n        },\r\n    }\r\n\r\n    return (\r\n        <ReactTable\r\n            columns={columns}\r\n            {...defaultProps}\r\n        />\r\n    )\r\n}\r\n\r\nconst connectedTable = connect(\r\n    (state, ownProps) => ({\r\n        table: state.tables[ownProps.tableName],\r\n    }),\r\n    dispatch => ({\r\n        connectTable: (name, url, pages, sort, order, perPage) =>\r\n            dispatch(actions.TableActions.default.getTable(name, url, pages, sort, order, perPage)),\r\n    }),\r\n)(Table)\r\n\r\nexport default connectedTable\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;"],"sourceRoot":""}