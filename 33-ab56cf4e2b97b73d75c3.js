(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{643:function(e,t,a){"use strict";a.r(t);a(195),a(139),a(100);var n=a(0),r=a.n(n),l=a(68),i=a(28),o=a.n(i),c=a(662),s=a(573),m=a(663),u=a(15),f=a(655),d=a.n(f),g=function(e){var t=e.data,a=t.timelines,n=t.range,l=[{x:a,y:t.values,type:"scatter",mode:"lines+markers",marker:{color:"red"}}],i={width:window.innerWidth>1599?800:700,height:390,yaxis:{side:"left",domain:[0,1]},xaxis:{type:"date",range:n,tickformat:"%d %b\n %Y"}};return r.a.createElement(d.a,{data:l,layout:i,config:{displaylogo:!1}})},p=(a(32),a(758)),h=a(707),v=a.n(h),b=(a(596),a(24));Object(p.b)("ru",v.a);var E=b.a.constants.moment.graphFormat,B=function(e){var t=e.range,a=e.changeRange,l=Object(n.useState)(0),i=l[0],c=l[1],s=function(e,t){return o()(e).isAfter(t)&&0===i?[o()(e).format(E),o()(e).format(E)]:o()(t).isBefore(e)&&1===i?(c(0),[o()(t).format(E),o()(t).format(E)]):[o()(e).format(E),o()(t).format(E)]};return r.a.createElement("div",{className:"calendar"},r.a.createElement(p.a,Object.assign({maxDate:new Date,open:!0,locale:"ru",popperPlacement:"bottom-start",popperModifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1},computeStyle:{enabled:!1},hide:{enabled:!1}},startDate:o()(t[0]).toDate(),endDate:o()(t[t.length-1]).toDate(),onChange:function(e){0===i?(c(1),a(JSON.stringify(s(e,e)))):(c(0),a(JSON.stringify(s(t[0],e))))}},0===i?{}:{selectsEnd:!0})))},O=a(764),A=(a(597),function(e){var t=Object.assign({},e);return r.a.createElement(O.a,t)}),w=a(571),y=a.n(w),N=b.a.constants.forms,j=N.graphTimes,k=N.serverFormat,x=N.recognizedFormat,D=N.graphFormat;var S=Object(l.b)(function(e){return{timeline:e.form.Graph.values.timeline,infoMarkets:e.graph}},function(e){return{changeValue:function(t,a,n){return e(Object(s.a)(t,a,n))},getValuesPls:function(t,a){return e(u.b.default.getBriefcaseData({start:t,end:a}))}}})(function(e){var t=e.timeline,a=e.changeValue,l=e.infoMarkets,i=e.getValuesPls,s=JSON.parse(t),m=s.map(function(e){return o()(e,D).format(x)}),u=function e(t){var a=t.A,n=t.B;if(a&&n&&a.length&&n.length){if(0===a.length)return[];for(var r=[],l=[],i=[],c=[],s=a[0],m=n[0],u=1;u<a.length;u++)o()(a[u],D).isBefore(s,D)?(r[r.length]=a[u],l[l.length]=n[u]):(i[i.length]=a[u],c[c.length]=n[u]);return{A:e({A:r,B:l}).A.concat(s,e({A:i,B:c}).A),B:e({A:r,B:l}).B.concat(m,e({A:i,B:c}).B)}}return{A:[],B:[]}}({A:l.axisX,B:l.axisY}),f=Object(n.useState)({timelines:u.A,values:u.B,range:s}),d=f[0],p=f[1];return Object(n.useEffect)(function(){i(o()(s[0],D).format(k),o()(s[m.length-1],D).format(k))},[t]),Object(n.useEffect)(function(){p({timelines:u.A,values:u.B,range:s})},[l]),r.a.createElement("div",{className:y.a.graph__container},r.a.createElement("div",{className:y.a.plot},r.a.createElement("div",{className:y.a.plot__title},r.a.createElement("span",{className:y.a.title},"Динамика стоимости портфеля (руб.)"),r.a.createElement("form",{className:y.a.controls},r.a.createElement("label",{htmlFor:"timeline",className:y.a.ddLabel},"Показать за"),r.a.createElement(c.a,{name:"timeline",component:"input",type:"hidden"}),r.a.createElement(A,{onChange:function(e,t){return a("Graph","timeline",t.value)},placeholder:"Промежуток времени",options:j,defaultValue:j[1].value,selection:!0}))),r.a.createElement("div",{className:y.a.plot__container},r.a.createElement(g,{data:d}))),r.a.createElement(B,{changeRange:function(e){return a("Graph","timeline",e)},range:s}))}),V=Object(m.a)({form:"Graph",destroyOnUnmount:!1,initialValues:{timeline:j[1].value}})(S);t.default=V}}]);
//# sourceMappingURL=33-ab56cf4e2b97b73d75c3.js.map